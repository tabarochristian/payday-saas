# Dockerfile.slave for Slave Database
FROM postgres:latest

# Copy the initialization script and wait-for-it script
COPY ./slave-init/init-slave.sql /docker-entrypoint-initdb.d/
COPY ./slave-init/wait-for-it.sh /usr/local/bin/wait-for-it.sh

# Ensure proper permissions
RUN chmod +x /usr/local/bin/wait-for-it.sh

# Default command ensures wait-for-it runs before PostgreSQL starts
CMD ["sh", "-c", "wait-for-it.sh && docker-entrypoint.sh postgres"]