{% load mathfilters %}
<div class="card shadow-sm border-0 rounded-lg">
    <div class="card-body">
      <h6 class="text-primary fw-semibold mb-3">Congés restants</h6>
      <ul class="list-group list-group-flush">
        {% for item in remaining_leaves %}
        <li class="list-group-item px-2 py-2">
          <div class="d-flex justify-content-between align-items-center">
            <span class="fw-semibold">{{ item.type }}</span>
            <span class="badge 
              {% if item.remaining == 0 %}
                bg-danger text-white
              {% elif item.remaining <= 3 %}
                bg-warning text-dark
              {% else %}
                bg-success text-white
              {% endif %}
            ">
              {{ item.remaining }} / {{ item.allowed }} jours
            </span>
          </div>
          <div class="text-muted small">
            Utilisé : {{ item.used }} jours
          </div>
  
          <!-- Optional progress bar -->
          <div class="progress mt-1" style="height: 4px;">
            <div class="progress-bar 
              {% if item.remaining == 0 %}
                bg-danger
              {% elif item.remaining <= 3 %}
                bg-warning
              {% else %}
                bg-success
              {% endif %}
            " role="progressbar"
            style="width: {{ item.used|div:item.allowed|mul:100|floatformat:0 }}%;">
            </div>
          </div>
        </li>
        {% empty %}
        <li class="list-group-item text-muted text-center py-2">
          Aucun type de congé défini.
        </li>
        {% endfor %}
      </ul>
    </div>
  </div>
  